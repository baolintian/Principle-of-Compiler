<div style = "font-size: 2em;"><center >用lex和bison实现对数据库语言的解析</center></div>



# 物理结构的设计



## isql.db

本文件主要存储的是数据库的数据的信息，相当于是数据的数据。

下面说明几个常变量的含义：

`PAGE_SIZE = 2048`: 表示的是一个页表的大小为2048Bytes, 用于基地址寻址用。

`第0页：`

![](https://ws1.sinaimg.cn/large/a7ded905ly1g3f3i7jn3bj20h10400so.jpg)

存放数据的一些基本的属性，可拓展性较大，总共占28bits。

可以看到table数量从18开始计数的，这里实际上就是给每个表一个编号，因为`0~17`号存着一些有用的数据，所以该编号就从18号开始。

`第1页：`

![](https://ws1.sinaimg.cn/large/a7ded905ly1g3f3ibymqij213n0370sn.jpg)

保存着数据库的基本的属性。一个数据组大小是64bits，那么一共可以存放2048/64=`32`个数据库信息项。



`第2~17页：`

![](https://ws1.sinaimg.cn/large/a7ded905ly1g3f3imiqv7j213q035aa3.jpg)

该数据项一个PAGE的大小是1024bits，所以每一个数据库能存放1024/64=16个表。

（17-2+1）*2048/1024 = 32,正好与我们之前算的能存32个数据库的数字相吻合。



`18~无穷$`：

![](https://ws1.sinaimg.cn/large/a7ded905ly1g3f3ihr9a6j213n036t8r.jpg)

存放的是表的属性的信息，一个表能存放2048/64 = 32个属性。



## isql.dat

`第0页：`

保存的是基本的数据。

`第1页：`

目前没有什么用，用于用户信息维护的拓展。

`2~65页：`

用户信息。

`65页之后:`

存放的是具体的数据，这些数据能存2048bits,也就是说，如果一个变量占4bits, 那么这个数据项就能保存2048/4=512项。注意：因为数据保存是线性的，所以在删除数据的时候不能以链表的形式进行删除。我用了一个特别蠢的方法，将要删除的特征保存下来，当扫描的时候满足条件的时候就不显示，目前是这个系统的一个小漏洞。



# Lex词法分析



# Bison语法分析

